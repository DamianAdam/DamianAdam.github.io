<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>Hello World</title>
    <link href="/2024/08/01/hello-world/"/>
    <url>/2024/08/01/hello-world/</url>
    
    <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>BD环境部署00-集群环境停启总汇</title>
    <link href="/2022/01/21/BD%E7%8E%AF%E5%A2%83%E9%83%A8%E7%BD%B200-%E9%9B%86%E7%BE%A4%E7%8E%AF%E5%A2%83%E5%81%9C%E5%90%AF%E6%80%BB%E6%B1%87/"/>
    <url>/2022/01/21/BD%E7%8E%AF%E5%A2%83%E9%83%A8%E7%BD%B200-%E9%9B%86%E7%BE%A4%E7%8E%AF%E5%A2%83%E5%81%9C%E5%90%AF%E6%80%BB%E6%B1%87/</url>
    
    <content type="html"><![CDATA[<p><strong>所有组件都请按照正常步骤启动或停止，不要进程还开着就强制给节点下电，这样可能引起未知错误。</strong></p><hr><h2 id="Hadoop"><a href="#Hadoop" class="headerlink" title="Hadoop"></a>Hadoop</h2><h4 id="启动"><a href="#启动" class="headerlink" title="启动"></a>启动</h4><ul><li>在master上操作。</li><li>切换到$HADOOP_HOME目录下。</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@master ~]# <span class="built_in">cd</span> <span class="variable">$HADOOP_HOME</span> </span><br></pre></td></tr></table></figure><ul><li>执行集群启动脚本。</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@master hadoop-2.8.2]# sbin/start-all.sh</span><br></pre></td></tr></table></figure><h4 id="查看状态"><a href="#查看状态" class="headerlink" title="查看状态"></a>查看状态</h4><ul><li>在master、slave1、slave2上操作，命令jps。</li><li>master</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@master ~]# jps</span><br><span class="line">1456 SecondaryNameNode</span><br><span class="line">1250 NameNode</span><br><span class="line">1908 Jps</span><br><span class="line">1627 ResourceManager</span><br></pre></td></tr></table></figure><ul><li>slave1</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@slave1 ~]# jps</span><br><span class="line">1126 DataNode</span><br><span class="line">1243 NodeManager</span><br><span class="line">1387 Jps</span><br></pre></td></tr></table></figure><ul><li>slave2</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@slave2 ~]# jps</span><br><span class="line">1234 NodeManager</span><br><span class="line">1378 Jps</span><br><span class="line">1117 DataNode</span><br></pre></td></tr></table></figure><h4 id="停止"><a href="#停止" class="headerlink" title="停止"></a>停止</h4><ul><li>在master上操作。</li><li>切换到$HADOOP_HOME目录下。</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@master ~]# <span class="built_in">cd</span> <span class="variable">$HADOOP_HOME</span> </span><br></pre></td></tr></table></figure><ul><li>执行集群启动脚本。</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@master hadoop-2.8.2]# sbin/stop-all.sh</span><br></pre></td></tr></table></figure><h2 id="Zookeeper"><a href="#Zookeeper" class="headerlink" title="Zookeeper"></a>Zookeeper</h2><h4 id="启动-1"><a href="#启动-1" class="headerlink" title="启动"></a>启动</h4><ul><li>在master、slave1、slave2上操作，命令zkServer.sh start。</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@master ~]# zkServer.sh start</span><br><span class="line">ZooKeeper JMX enabled by default</span><br><span class="line">Using config: /usr/local/src/zookeeper-3.4.10/bin/../conf/zoo.cfg</span><br><span class="line">Starting zookeeper ... STARTED</span><br></pre></td></tr></table></figure><h4 id="查看状态-1"><a href="#查看状态-1" class="headerlink" title="查看状态"></a>查看状态</h4><ul><li>在master、slave1、slave2上操作，命令zkServer.sh status。</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@master ~]# zkServer.sh status</span><br><span class="line">ZooKeeper JMX enabled by default</span><br><span class="line">Using config: /usr/local/src/zookeeper-3.4.10/bin/../conf/zoo.cfg</span><br><span class="line">Mode: follower</span><br></pre></td></tr></table></figure><ul><li>也可以通过jps查看，QuorumPeerMain就是Zookeeper。</li></ul><h4 id="停止-1"><a href="#停止-1" class="headerlink" title="停止"></a>停止</h4><ul><li>在master、slave1、slave2上操作，命令zkServer.sh stop。</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@master ~]# zkServer.sh stop</span><br><span class="line">ZooKeeper JMX enabled by default</span><br><span class="line">Using config: /usr/local/src/zookeeper-3.4.10/bin/../conf/zoo.cfg</span><br><span class="line">Stopping zookeeper ... STOPPED</span><br></pre></td></tr></table></figure><ul><li>注意：给节点断电时一定要先停止Zookeeper，否则会影响你节点下次通电时Zookeeper的启动。</li></ul><h2 id="Hive"><a href="#Hive" class="headerlink" title="Hive"></a>Hive</h2><h4 id="启动-2"><a href="#启动-2" class="headerlink" title="启动"></a>启动</h4><ul><li>启动hadoop。</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@master ~]# cd $HADOOP_HOME </span><br><span class="line">[root@master hadoop-2.8.2]# sbin/start-all.sh</span><br></pre></td></tr></table></figure><ul><li>窗口1启动元数据服务。</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@master ~]# hive --service metastore &amp;</span><br></pre></td></tr></table></figure><ul><li>窗口2启动hiveserver2和beeline客户端。</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[root@master ~]# hive --service hiveserver2 &amp;</span><br><span class="line">[1] 6169</span><br><span class="line">[root@master ~]# beeline -u jdbc:hive2://master:10000 -n root</span><br><span class="line">Connecting to jdbc:hive2://master:10000</span><br><span class="line">Connected to: Apache Hive (version 1.2.2)</span><br><span class="line">Driver: Hive JDBC (version 1.2.2)</span><br><span class="line">Transaction isolation: TRANSACTION_REPEATABLE_READ</span><br><span class="line">Beeline version 1.2.2 by Apache Hive</span><br><span class="line">0: jdbc:hive2://master:10000&gt;</span><br></pre></td></tr></table></figure><h4 id="查看状态-2"><a href="#查看状态-2" class="headerlink" title="查看状态"></a>查看状态</h4><ul><li>通过jps查看，所有RunJar都是Hive的进程。</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[root@master ~]# jps</span><br><span class="line">5283 SecondaryNameNode</span><br><span class="line">5079 NameNode</span><br><span class="line">6169 RunJar</span><br><span class="line">5930 RunJar</span><br><span class="line">6380 Jps</span><br><span class="line">5453 ResourceManager</span><br><span class="line">6254 RunJar</span><br><span class="line">5743 QuorumPeerMain</span><br></pre></td></tr></table></figure><h4 id="停止-2"><a href="#停止-2" class="headerlink" title="停止"></a>停止</h4><ul><li>退出beeline客户端：Ctrl + C。</li><li>关闭元数据服务和hiveserver2：使用jps查看所有RunJar进程，然后用kill -9杀死。</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">[root@master ~]# jps</span><br><span class="line">5283 SecondaryNameNode</span><br><span class="line">5079 NameNode</span><br><span class="line">6169 RunJar</span><br><span class="line">5930 RunJar</span><br><span class="line">6410 Jps</span><br><span class="line">5453 ResourceManager</span><br><span class="line">5743 QuorumPeerMain</span><br><span class="line">[root@master ~]# <span class="built_in">kill</span> -9 6169</span><br><span class="line">[root@master ~]# <span class="built_in">kill</span> -9 5930</span><br><span class="line">[1]+  Killed                  hive --service hiveserver2</span><br><span class="line">[root@master ~]# jps</span><br><span class="line">5283 SecondaryNameNode</span><br><span class="line">5079 NameNode</span><br><span class="line">6426 Jps</span><br><span class="line">5453 ResourceManager</span><br><span class="line">5743 QuorumPeerMain</span><br></pre></td></tr></table></figure><h2 id="HBase"><a href="#HBase" class="headerlink" title="HBase"></a>HBase</h2><h4 id="启动-3"><a href="#启动-3" class="headerlink" title="启动"></a>启动</h4><ul><li>启动Hadoop。</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@master ~]# <span class="built_in">cd</span> <span class="variable">$HADOOP_HOME</span> </span><br><span class="line">[root@master hadoop-2.8.2]# sbin/start-all.sh </span><br></pre></td></tr></table></figure><ul><li><p>如果使用自建Zookeeper集群（hbase-env.sh文件中HBASE_MANAGES_ZK&#x3D;true的就是使用自建Zookeeper集群），则要先启动Zookeeper。</p></li><li><p>启动HBase。</p></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@master ~]# start-hbase.sh</span><br></pre></td></tr></table></figure><ul><li>进入HBase。</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@master ~]# hbase shell</span><br></pre></td></tr></table></figure><h4 id="查看状态-3"><a href="#查看状态-3" class="headerlink" title="查看状态"></a>查看状态</h4><ul><li>命令：jps</li><li>master：HMaster、HRegionServer、HQuorumPeer</li><li>slave1：HRegionServer、HQuorumPeer</li><li>slave2：HRegionServer、HQuorumPeer</li><li>使用自建Zookeeper集群的没有HQuorumPeer进程。</li></ul><h4 id="停止-3"><a href="#停止-3" class="headerlink" title="停止"></a>停止</h4><ul><li>退出Shell：exit</li><li>停止集群：stop-hbase.sh</li><li>使用Zookeeper集群的这里需要先关闭Zookeeper。</li><li>关闭Hadoop。</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@master ~]# <span class="built_in">cd</span> <span class="variable">$HADOOP_HOME</span> </span><br><span class="line">[root@master hadoop-2.8.2]# sbin/stop-all.sh </span><br></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>大数据环境部署</category>
      
    </categories>
    
    
    <tags>
      
      <tag>大数据环境部署</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>BD环境部署04-HBase 0.98.24环境搭建</title>
    <link href="/2022/01/21/BD%E7%8E%AF%E5%A2%83%E9%83%A8%E7%BD%B204-HBase%200.98.24%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/"/>
    <url>/2022/01/21/BD%E7%8E%AF%E5%A2%83%E9%83%A8%E7%BD%B204-HBase%200.98.24%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/</url>
    
    <content type="html"><![CDATA[<ul><li>下载hbase-0.98.24-hadoop2-bin.tar.gz并上传到&#x2F;usr&#x2F;local&#x2F;src目录下，然后解压。</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@master ~]# <span class="built_in">cd</span> /usr/local/src/</span><br><span class="line">[root@master src]# <span class="built_in">ls</span> | grep hb</span><br><span class="line">hbase-0.98.24-hadoop2-bin.tar.gz</span><br><span class="line">[root@master src]# tar -zxvf hbase-0.98.24-hadoop2-bin.tar.gz </span><br></pre></td></tr></table></figure><ul><li>进入hbase-0.98.24-hadoop2&#x2F;conf目录，编辑regionservers文件。</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@master src]# <span class="built_in">cd</span> hbase-0.98.24-hadoop2/conf/</span><br><span class="line">[root@master conf]# vim regionservers </span><br><span class="line">[root@master conf]# <span class="built_in">cat</span> regionservers </span><br><span class="line">master</span><br><span class="line">slave1</span><br><span class="line">slave2</span><br></pre></td></tr></table></figure><ul><li>编辑hbase-env.sh。</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@master conf]# vim hbase-env.sh </span><br><span class="line">[root@master conf]# <span class="built_in">tail</span> -n 2 hbase-env.sh </span><br><span class="line"><span class="built_in">export</span> JAVA_HOME=/usr/local/src/jdk1.8.0_212</span><br><span class="line"><span class="built_in">export</span> CLASSPATH=.:<span class="variable">$CLASSPATH</span>:<span class="variable">$JAVA_HOME</span>/lib</span><br></pre></td></tr></table></figure><ul><li>编辑hbase-site.xml配置文件。</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">[root@master conf]# vim hbase-site.xml</span><br><span class="line">[root@master conf]# <span class="built_in">cat</span> hbase-site.xml</span><br><span class="line">&lt;configuration&gt;</span><br><span class="line">    &lt;property&gt;</span><br><span class="line">        &lt;name&gt;hbase.tmp.dir&lt;/name&gt;</span><br><span class="line">        &lt;value&gt;/var/hbase&lt;/value&gt;</span><br><span class="line">    &lt;/property&gt;</span><br><span class="line"></span><br><span class="line">    &lt;property&gt;</span><br><span class="line">        &lt;name&gt;hbase.rootdir&lt;/name&gt;</span><br><span class="line">        &lt;value&gt;hdfs://master:9000/hbase&lt;/value&gt;</span><br><span class="line">    &lt;/property&gt;</span><br><span class="line"></span><br><span class="line">    &lt;property&gt;</span><br><span class="line">        &lt;name&gt;hbase.cluster.distributed&lt;/name&gt;</span><br><span class="line">        &lt;value&gt;<span class="literal">true</span>&lt;/value&gt;</span><br><span class="line">    &lt;/property&gt;</span><br><span class="line"></span><br><span class="line">    &lt;property&gt;</span><br><span class="line">        &lt;name&gt;hbase.zookeeper.quorum&lt;/name&gt;</span><br><span class="line">        &lt;value&gt;master,slave1,slave2&lt;/value&gt;</span><br><span class="line">    &lt;/property&gt;</span><br><span class="line"></span><br><span class="line">    &lt;property&gt;</span><br><span class="line">        &lt;name&gt;hbase.zookeeper.property.dataDir&lt;/name&gt;</span><br><span class="line">        &lt;value&gt;/usr/local/src/hbase-0.98.24-hadoop2/zookeeper&lt;/value&gt;</span><br><span class="line">    &lt;/property&gt;</span><br><span class="line"></span><br><span class="line">    &lt;property&gt;</span><br><span class="line">        &lt;name&gt;hbase.master.info.port&lt;/name&gt;</span><br><span class="line">        &lt;value&gt;60010&lt;/value&gt;</span><br><span class="line">    &lt;/property&gt; </span><br><span class="line">&lt;/configuration&gt;</span><br></pre></td></tr></table></figure><ul><li>创建目录。</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@master ~]# <span class="built_in">cd</span> /usr/local/src/hbase-0.98.24-hadoop2</span><br><span class="line">[root@master hbase-0.98.24-hadoop2]# <span class="built_in">mkdir</span> logs</span><br><span class="line">[root@master hbase-0.98.24-hadoop2]# <span class="built_in">mkdir</span> zookeeper</span><br><span class="line">[root@master hbase-0.98.24-hadoop2]# <span class="built_in">mkdir</span> -p /var/hbase</span><br></pre></td></tr></table></figure><ul><li>同步HBase到slave1和slave2。</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@master ~]# scp -r /usr/local/src/hbase-0.98.24-hadoop2 root@slave1:/usr/local/src/hbase-0.98.24-hadoop2</span><br><span class="line">[root@master ~]# scp -r /usr/local/src/hbase-0.98.24-hadoop2 root@slave2:/usr/local/src/hbase-0.98.24-hadoop2</span><br></pre></td></tr></table></figure><ul><li>配置环境变量。（master、slave1、slave2）</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@master ~]# vim /etc/profile</span><br><span class="line">[root@master ~]# <span class="built_in">tail</span> -n 5 /etc/profile</span><br><span class="line"><span class="comment">## HBASE_HOME</span></span><br><span class="line"><span class="built_in">export</span> HBASE_HOME=/usr/local/src/hbase-0.98.24-hadoop2</span><br><span class="line"><span class="built_in">export</span> HBASE_CLASSPATH=<span class="variable">$HBASE_HOME</span>/conf</span><br><span class="line"><span class="built_in">export</span> HBASE_LOG_DIR=<span class="variable">$HBASE_HOME</span>/logs</span><br><span class="line"><span class="built_in">export</span> PATH=<span class="variable">$PATH</span>:<span class="variable">$HBASE_HOME</span>/bin</span><br><span class="line">[root@master ~]# <span class="built_in">source</span> /etc/profile</span><br></pre></td></tr></table></figure><ul><li>启动Hadoop。</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@master ~]# <span class="built_in">cd</span> <span class="variable">$HADOOP_HOME</span> </span><br><span class="line">[root@master hadoop-2.8.2]# sbin/start-all.sh </span><br></pre></td></tr></table></figure><ul><li>启动集群。</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@master ~]# start-hbase.sh</span><br></pre></td></tr></table></figure><ul><li><p>查看状态。</p><ul><li>master：HMaster、HRegionServer、HQuorumPeer</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@master ~]# jps</span><br><span class="line">1552 NameNode</span><br><span class="line">2644 HRegionServer</span><br><span class="line">1929 ResourceManager</span><br><span class="line">2938 Jps</span><br><span class="line">2491 HMaster</span><br><span class="line">1758 SecondaryNameNode</span><br><span class="line">2430 HQuorumPeer</span><br></pre></td></tr></table></figure><ul><li>slave1：HRegionServer、HQuorumPeer</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@slave1 ~]# jps</span><br><span class="line">1459 HQuorumPeer</span><br><span class="line">1539 HRegionServer</span><br><span class="line">1236 NodeManager</span><br><span class="line">1161 DataNode</span><br><span class="line">1707 Jps</span><br></pre></td></tr></table></figure><ul><li>slave2：HRegionServer、HQuorumPeer</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@slave2 ~]# jps</span><br><span class="line">1236 NodeManager</span><br><span class="line">1157 DataNode</span><br><span class="line">1542 HRegionServer</span><br><span class="line">1721 Jps</span><br><span class="line">1455 HQuorumPeer</span><br></pre></td></tr></table></figure></li><li><p>监控页面：<a href="http://192.168.10.201:60010/master-status">http://192.168.10.201:60010/master-status</a></p></li></ul>]]></content>
    
    
    <categories>
      
      <category>大数据环境部署</category>
      
    </categories>
    
    
    <tags>
      
      <tag>大数据环境部署</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>BD环境部署03-Hive 1.2.2环境搭建</title>
    <link href="/2022/01/20/BD%E7%8E%AF%E5%A2%83%E9%83%A8%E7%BD%B203-Hive%201.2.2%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/"/>
    <url>/2022/01/20/BD%E7%8E%AF%E5%A2%83%E9%83%A8%E7%BD%B203-Hive%201.2.2%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/</url>
    
    <content type="html"><![CDATA[<h2 id="01-安装MySQL"><a href="#01-安装MySQL" class="headerlink" title="01. 安装MySQL"></a>01. 安装MySQL</h2><ul><li>MySQL的版本不要太高，这里选择MySQL 5.5。</li><li>在网上下载MySQL-client-5.5.59-1.el7.x86_64.rpm和MySQL-server-5.5.59-1.el7.x86_64.rpm文件，并将二者上传到&#x2F;usr&#x2F;local&#x2F;src&#x2F;mysql5.5目录下。</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@master ~]# <span class="built_in">cd</span> /usr/local/src/</span><br><span class="line">[root@master src]# <span class="built_in">mkdir</span> mysql5.5</span><br><span class="line">[root@master src]# <span class="built_in">cd</span> mysql5.5</span><br><span class="line">[root@master mysql5.5]# <span class="built_in">ls</span></span><br><span class="line">MySQL-client-5.5.59-1.el7.x86_64.rpm  MySQL-server-5.5.59-1.el7.x86_64.rpm</span><br></pre></td></tr></table></figure><ul><li>检查系统中是否有已经安装的mysql或mariadb的包，有的话使用rpm -e或yum remove命令将其删除。</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@master mysql5.5]# rpm -qa | grep -i mysql</span><br><span class="line">[root@master mysql5.5]# rpm -qa | grep -i mariadb</span><br><span class="line">mariadb-libs-5.5.56-2.el7.x86_64</span><br><span class="line">[root@master mysql5.5]# yum remove -y mariadb*</span><br></pre></td></tr></table></figure><ul><li>安装服务器与客户端。</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@master mysql5.5]# rpm -ivh --nodeps MySQL-server-5.5.59-1.el7.x86_64.rpm</span><br><span class="line">[root@master mysql5.5]# rpm -ivh --nodeps MySQL-client-5.5.59-1.el7.x86_64.rpm</span><br></pre></td></tr></table></figure><ul><li>启动与设置开机启动。</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@master mysql5.5]# systemctl start mysql</span><br><span class="line">[root@master mysql5.5]# systemctl <span class="built_in">enable</span> mysql</span><br><span class="line">mysql.service is not a native service, redirecting to /sbin/chkconfig.</span><br><span class="line">Executing /sbin/chkconfig mysql on</span><br></pre></td></tr></table></figure><ul><li>登录MySQL。（注意，现在是没有密码的，因此不要加-p选项）</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">[root@master mysql5.5]# mysql -u root</span><br><span class="line">Welcome to the MySQL monitor.  Commands end with ; or \g.</span><br><span class="line">Your MySQL connection <span class="built_in">id</span> is 1</span><br><span class="line">Server version: 5.5.59 MySQL Community Server (GPL)</span><br><span class="line"></span><br><span class="line">Copyright (c) 2000, 2018, Oracle and/or its affiliates. All rights reserved.</span><br><span class="line"></span><br><span class="line">Oracle is a registered trademark of Oracle Corporation and/or its</span><br><span class="line">affiliates. Other names may be trademarks of their respective</span><br><span class="line">owners.</span><br><span class="line"></span><br><span class="line">Type <span class="string">&#x27;help;&#x27;</span> or <span class="string">&#x27;\h&#x27;</span> <span class="keyword">for</span> <span class="built_in">help</span>. Type <span class="string">&#x27;\c&#x27;</span> to clear the current input statement.</span><br><span class="line"></span><br><span class="line">mysql&gt; </span><br></pre></td></tr></table></figure><ul><li>修改密码。（建议设为hadoop，这与下面Hive的配置文件有关）</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; <span class="built_in">set</span> password=password(<span class="string">&#x27;hadoop&#x27;</span>);</span><br><span class="line">Query OK, 0 rows affected (0.01 sec)</span><br></pre></td></tr></table></figure><ul><li>开启master的远程登录权限。（必须开启，后面Hive需要连接MySQL）</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; grant all privileges on *.* to <span class="string">&#x27;root&#x27;</span>@<span class="string">&#x27;master&#x27;</span> identified by <span class="string">&#x27;hadoop&#x27;</span>;</span><br><span class="line">Query OK, 0 rows affected (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; flush privileges;</span><br><span class="line">Query OK, 0 rows affected (0.00 sec)</span><br></pre></td></tr></table></figure><ul><li>退出，完成安装。</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; <span class="built_in">exit</span>;</span><br><span class="line">Bye</span><br></pre></td></tr></table></figure><h2 id="02-准备MySQL的连接工具"><a href="#02-准备MySQL的连接工具" class="headerlink" title="02. 准备MySQL的连接工具"></a>02. 准备MySQL的连接工具</h2><ul><li>从网上下载mysql-connector-java-5.1.44.tar.gz，并上传到&#x2F;usr&#x2F;local&#x2F;src&#x2F;目录下，然后解压。</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@master ~]# <span class="built_in">cd</span> /usr/local/src/</span><br><span class="line">[root@master src]# <span class="built_in">ls</span> | grep mysql-conn</span><br><span class="line">mysql-connector-java-5.1.44.tar.gz</span><br><span class="line">[root@master src]# tar -zxvf mysql-connector-java-5.1.44.tar.gz</span><br></pre></td></tr></table></figure><ul><li>解压后进入mysql-connector-java-5.1.44目录，即可看到jar包。</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@master src]# <span class="built_in">cd</span> mysql-connector-java-5.1.44</span><br><span class="line">[root@master mysql-connector-java-5.1.44]# <span class="built_in">ls</span> | grep mysql</span><br><span class="line">mysql-connector-java-5.1.44-bin.jar</span><br></pre></td></tr></table></figure><h2 id="03-安装Hive"><a href="#03-安装Hive" class="headerlink" title="03. 安装Hive"></a>03. 安装Hive</h2><ul><li>从网上下载apache-hive-1.2.2-bin.tar.gz文件，并上传到&#x2F;usr&#x2F;local&#x2F;src&#x2F;目录下，然后解压。</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@master ~]# <span class="built_in">cd</span> /usr/local/src/</span><br><span class="line">[root@master src]# <span class="built_in">ls</span> | grep hive</span><br><span class="line">apache-hive-1.2.2-bin.tar.gz</span><br><span class="line">[root@master src]# tar -zxvf apache-hive-1.2.2-bin.tar.gz </span><br><span class="line">[root@master src]# <span class="built_in">cd</span> apache-hive-1.2.2-bin</span><br></pre></td></tr></table></figure><ul><li>进入conf目录，复制hive-env.sh.template为hive-env.sh，并创建hive-site.xml文件。</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@master apache-hive-1.2.2-bin]# <span class="built_in">cd</span> conf</span><br><span class="line">[root@master conf]# <span class="built_in">cp</span> hive-env.sh.template hive-env.sh</span><br><span class="line">[root@master conf]# <span class="built_in">touch</span> hive-site.xml</span><br></pre></td></tr></table></figure><ul><li>编辑hive-env.sh文件。</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@master conf]# <span class="built_in">tail</span> -n 4 hive-env.sh</span><br><span class="line"><span class="built_in">export</span> JAVA_HOME=/usr/local/src/jdk1.8.0_212                        <span class="comment"># Java路径</span></span><br><span class="line"><span class="built_in">export</span> HADOOP_HOME=/usr/local/src/hadoop-2.8.2                      <span class="comment"># Hadoop安装路径</span></span><br><span class="line"><span class="built_in">export</span> HIVE_HOME=/usr/local/src/apache-hive-1.2.2-bin               <span class="comment"># Hive安装路径</span></span><br><span class="line"><span class="built_in">export</span> HIVE_CONF_DIR=/usr/local/src/apache-hive-1.2.2-bin/conf      <span class="comment"># Hive配置文件路径</span></span><br></pre></td></tr></table></figure><ul><li>编辑hive-site.xml文件。</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">[root@master conf]# vim hive-site.xml </span><br><span class="line">[root@master conf]# <span class="built_in">cat</span> hive-site.xml </span><br><span class="line">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> standalone=<span class="string">&quot;no&quot;</span>?&gt;</span><br><span class="line">&lt;?xml-stylesheet <span class="built_in">type</span>=<span class="string">&quot;text/xsl&quot;</span> href=<span class="string">&quot;configuration.xsl&quot;</span>?&gt;</span><br><span class="line">&lt;configuration&gt;</span><br><span class="line">    &lt;property&gt;</span><br><span class="line">        &lt;name&gt;javax.jdo.option.ConnectionURL&lt;/name&gt;</span><br><span class="line">        &lt;value&gt;jdbc:mysql://master:3306/hive?createDatabaseIfNotExist=<span class="literal">true</span>&lt;/value&gt;</span><br><span class="line">    &lt;/property&gt;</span><br><span class="line"></span><br><span class="line">    &lt;property&gt;</span><br><span class="line">        &lt;name&gt;javax.jdo.option.ConnectionDriverName&lt;/name&gt;</span><br><span class="line">        &lt;value&gt;com.mysql.jdbc.Driver&lt;/value&gt;</span><br><span class="line">    &lt;/property&gt;</span><br><span class="line"></span><br><span class="line">    &lt;property&gt;</span><br><span class="line">        &lt;name&gt;javax.jdo.option.ConnectionUserName&lt;/name&gt;</span><br><span class="line">        &lt;value&gt;root&lt;/value&gt;</span><br><span class="line">    &lt;/property&gt;</span><br><span class="line"></span><br><span class="line">    &lt;property&gt;</span><br><span class="line">        &lt;name&gt;javax.jdo.option.ConnectionPassword&lt;/name&gt;</span><br><span class="line">        &lt;value&gt;hadoop&lt;/value&gt;</span><br><span class="line">    &lt;/property&gt;</span><br><span class="line"></span><br><span class="line">    &lt;property&gt;</span><br><span class="line">        &lt;name&gt;hive.metastore.warehouse.dir&lt;/name&gt;</span><br><span class="line">        &lt;value&gt;/usr/local/src/apache-hive-1.2.2-bin/warehouse&lt;/value&gt;</span><br><span class="line">    &lt;/property&gt;</span><br><span class="line"></span><br><span class="line">    &lt;property&gt;</span><br><span class="line">        &lt;name&gt;hive.exec.scratchdir&lt;/name&gt;</span><br><span class="line">        &lt;value&gt;/usr/local/src/apache-hive-1.2.2-bin/tmp&lt;/value&gt;</span><br><span class="line">    &lt;/property&gt;</span><br><span class="line"></span><br><span class="line">    &lt;property&gt;</span><br><span class="line">        &lt;name&gt;hive.querylog.location&lt;/name&gt;</span><br><span class="line">        &lt;value&gt;/usr/local/src/apache-hive-1.2.2-bin/log&lt;/value&gt;</span><br><span class="line">    &lt;/property&gt;</span><br><span class="line">&lt;/configuration&gt;</span><br></pre></td></tr></table></figure><ul><li>配置环境变量。</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@master ~]# vim /etc/profile</span><br><span class="line">[root@master ~]# <span class="built_in">tail</span> -n 3 /etc/profile</span><br><span class="line"><span class="comment">## HIVE_HOME</span></span><br><span class="line"><span class="built_in">export</span> HIVE_HOME=/usr/local/src/apache-hive-1.2.2-bin</span><br><span class="line"><span class="built_in">export</span> PATH=<span class="variable">$PATH</span>:<span class="variable">$HIVE_HOME</span>/bin</span><br><span class="line">[root@master ~]# <span class="built_in">source</span> /etc/profile</span><br></pre></td></tr></table></figure><ul><li>在&#x2F;usr&#x2F;local&#x2F;src&#x2F;apache-hive-1.2.2-bin目录下创建文件夹。</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@master ~]# <span class="built_in">cd</span> /usr/local/src/apache-hive-1.2.2-bin</span><br><span class="line">[root@master apache-hive-1.2.2-bin]# <span class="built_in">mkdir</span> tmp</span><br><span class="line">[root@master apache-hive-1.2.2-bin]# <span class="built_in">mkdir</span> <span class="built_in">log</span></span><br><span class="line">[root@master apache-hive-1.2.2-bin]# <span class="built_in">mkdir</span> warehouse</span><br></pre></td></tr></table></figure><ul><li>将mysql-connector-java-5.1.44-bin.jar复制到$HIVE_HOME&#x2F;lib目录下。</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@master ~]# <span class="built_in">cd</span> /usr/local/src/mysql-connector-java-5.1.44</span><br><span class="line">[root@master mysql-connector-java-5.1.44]# <span class="built_in">cp</span> mysql-connector-java-5.1.44-bin.jar <span class="variable">$HIVE_HOME</span>/lib</span><br></pre></td></tr></table></figure><h2 id="04-启动Hive"><a href="#04-启动Hive" class="headerlink" title="04. 启动Hive"></a>04. 启动Hive</h2><ul><li>启动Hadoop。</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# <span class="built_in">cd</span> <span class="variable">$HADOOP_HOME</span> </span><br><span class="line">[root@localhost hadoop-2.8.2]# sbin/start-all.sh</span><br></pre></td></tr></table></figure><ul><li>启动Hive。</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost hadoop-2.8.2]# hive</span><br><span class="line"></span><br><span class="line">Logging initialized using configuration in jar:file:/usr/local/src/apache-hive-1.2.2-bin/lib/hive-common-1.2.2.jar!/hive-log4j.properties</span><br><span class="line">hive&gt;</span><br></pre></td></tr></table></figure><h2 id="05-使用元数据服务的方式访问Hive"><a href="#05-使用元数据服务的方式访问Hive" class="headerlink" title="05. 使用元数据服务的方式访问Hive"></a>05. 使用元数据服务的方式访问Hive</h2><ul><li>先进入MySQL查看一下是否存在hive数据库，如果有的话先将其删除。</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">[root@master apache-hive-1.2.2-bin]# mysql -u root -p</span><br><span class="line">Enter password: </span><br><span class="line">Welcome to the MySQL monitor.  Commands end with ; or \g.</span><br><span class="line">Your MySQL connection id is 27</span><br><span class="line">Server version: 5.5.59 MySQL Community Server (GPL)</span><br><span class="line"></span><br><span class="line">Copyright (c) 2000, 2018, Oracle and/or its affiliates. All rights reserved.</span><br><span class="line"></span><br><span class="line">Oracle is a registered trademark of Oracle Corporation and/or its</span><br><span class="line">affiliates. Other names may be trademarks of their respective</span><br><span class="line">owners.</span><br><span class="line"></span><br><span class="line">Type &#x27;help;&#x27; or &#x27;\h&#x27; for help. Type &#x27;\c&#x27; to clear the current input statement.</span><br><span class="line"></span><br><span class="line">mysql&gt; show databases;</span><br><span class="line">+--------------------+</span><br><span class="line">| Database           |</span><br><span class="line">+--------------------+</span><br><span class="line">| information_schema |</span><br><span class="line">| hive               |</span><br><span class="line">| mysql              |</span><br><span class="line">| performance_schema |</span><br><span class="line">| test               |</span><br><span class="line">+--------------------+</span><br><span class="line">5 rows in set (0.03 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; drop database hive;</span><br><span class="line">Query OK, 53 rows affected (0.17 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; exit;</span><br><span class="line">Bye</span><br></pre></td></tr></table></figure><ul><li>初始化元数据。</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@master ~]# schematool -initSchema -dbType mysql -verbose</span><br></pre></td></tr></table></figure><ul><li>在$HIVE_HOME&#x2F;conf&#x2F;hive-site.xml中添加以下配置信息。</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[root@master ~]# <span class="built_in">cd</span> <span class="variable">$HIVE_HOME</span>/conf/</span><br><span class="line">[root@master conf]# vim hive-site.xml </span><br><span class="line">[root@master conf]# <span class="built_in">cat</span> hive-site.xml</span><br><span class="line">&lt;configuration&gt;</span><br><span class="line">    &lt;property&gt;</span><br><span class="line">        &lt;name&gt;hive.metastore.uris&lt;/name&gt;</span><br><span class="line">        &lt;value&gt;thrift://master:9083&lt;/value&gt;</span><br><span class="line">    &lt;/property&gt;</span><br><span class="line">&lt;/configuration&gt;</span><br></pre></td></tr></table></figure><ul><li>启动metastore，启动后该窗口不能再进行其他操作。</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@master ~]# hive --service metastore</span><br><span class="line">Starting Hive Metastore Server</span><br></pre></td></tr></table></figure><ul><li>打开一个新的Shell窗口，启动Hive。</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@master ~]# hive</span><br><span class="line"></span><br><span class="line">Logging initialized using configuration <span class="keyword">in</span> jar:file:/usr/local/src/apache-hive-1.2.2-bin/lib/hive-common-1.2.2.jar!/hive-log4j.properties</span><br><span class="line">hive&gt; </span><br></pre></td></tr></table></figure><h2 id="06-使用JDBC方式访问Hive"><a href="#06-使用JDBC方式访问Hive" class="headerlink" title="06. 使用JDBC方式访问Hive"></a>06. 使用JDBC方式访问Hive</h2><ul><li>在$HIVE_HOME&#x2F;conf&#x2F;hive-site.xml中添加以下配置信息。</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">[root@master ~]# <span class="built_in">cd</span> <span class="variable">$HIVE_HOME</span>/conf/</span><br><span class="line">[root@master conf]# vim hive-site.xml </span><br><span class="line">[root@master conf]# <span class="built_in">cat</span> hive-site.xml</span><br><span class="line">&lt;configuration&gt;</span><br><span class="line">    &lt;property&gt;</span><br><span class="line">        &lt;name&gt;hive.server2.transport.mode&lt;/name&gt;</span><br><span class="line">        &lt;value&gt;binary&lt;/value&gt;</span><br><span class="line">    &lt;/property&gt;</span><br><span class="line"></span><br><span class="line">    &lt;property&gt;</span><br><span class="line">        &lt;name&gt;hive.server2.thrift.bind.host&lt;/name&gt;</span><br><span class="line">        &lt;value&gt;master&lt;/value&gt;</span><br><span class="line">    &lt;/property&gt;</span><br><span class="line"></span><br><span class="line">    &lt;property&gt;</span><br><span class="line">        &lt;name&gt;hive.server2.thrift.port&lt;/name&gt;</span><br><span class="line">        &lt;value&gt;10000&lt;/value&gt;</span><br><span class="line">    &lt;/property&gt;</span><br><span class="line">&lt;/configuration&gt;</span><br></pre></td></tr></table></figure><ul><li>在$HADOOP_HIME&#x2F;etc&#x2F;hadoop&#x2F;core-site.xml中添加以下配置。</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">[root@master ~]# <span class="built_in">cd</span> <span class="variable">$HADOOP_HIME</span>/etc/hadoop/</span><br><span class="line">[root@master hadoop]# vim core-site.xml</span><br><span class="line">[root@master hadoop]# <span class="built_in">cat</span> core-site.xml</span><br><span class="line">&lt;configuration&gt;</span><br><span class="line">    &lt;property&gt;</span><br><span class="line">        &lt;name&gt;hadoop.proxyuser.root.hosts&lt;/name&gt;</span><br><span class="line">        &lt;value&gt;*&lt;/value&gt;</span><br><span class="line">    &lt;/property&gt;</span><br><span class="line">    </span><br><span class="line">    &lt;property&gt;</span><br><span class="line">        &lt;name&gt;hadoop.proxyuser.root.groups&lt;/name&gt;</span><br><span class="line">        &lt;value&gt;*&lt;/value&gt;</span><br><span class="line">    &lt;/property&gt;</span><br><span class="line">&lt;/configuration&gt;</span><br></pre></td></tr></table></figure><ul><li>重启master。</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@master ~]# init 6</span><br></pre></td></tr></table></figure><ul><li>启动Hadoop</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@master ~]# <span class="built_in">cd</span> <span class="variable">$HADOOP_HOME</span> </span><br><span class="line">[root@master hadoop-2.8.2]# sbin/start-all.sh</span><br></pre></td></tr></table></figure><ul><li>启动元数据服务，启动后该窗口不能再进行其他操作。</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@master ~]# hive --service metastore &amp;</span><br></pre></td></tr></table></figure><ul><li>打开一个新的Shell窗口，启动hiveserver2。</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@master ~]# hive --service hiveserver2 &amp;</span><br></pre></td></tr></table></figure><ul><li>启动beeline客户端。</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@master ~]# beeline -u jdbc:hive2://master:10000 -n root</span><br></pre></td></tr></table></figure><h2 id="07-使用DataGrip连接Hive"><a href="#07-使用DataGrip连接Hive" class="headerlink" title="07. 使用DataGrip连接Hive"></a>07. 使用DataGrip连接Hive</h2><ul><li>先进入beeline，查看hive-jdbc的版本，完成后使用Ctrl + C退出。</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@master hadoop-2.8.2]# beeline -u jdbc:hive2://master:10000 -n root</span><br><span class="line">Connecting to jdbc:hive2://master:10000</span><br><span class="line">Connected to: Apache Hive (version 1.2.2)</span><br><span class="line">Driver: Hive JDBC (version 1.2.2)</span><br><span class="line">Transaction isolation: TRANSACTION_REPEATABLE_READ</span><br><span class="line">Beeline version 1.2.2 by Apache Hive</span><br><span class="line">0: jdbc:hive2://master:10000&gt; </span><br></pre></td></tr></table></figure><ul><li>随便用IDEA打开一个Maven项目，在pom.xml中添加依赖。（添加完成后可以自行决定是否删除，主要是为了加载jar包）</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;org.apache.hive&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;hive-jdbc&lt;/artifactId&gt;</span><br><span class="line">    &lt;version&gt;1.2.2&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;org.apache.hadoop&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;hadoop-client&lt;/artifactId&gt;</span><br><span class="line">    &lt;version&gt;2.8.2&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;com.google.protobuf&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;protobuf-java&lt;/artifactId&gt;</span><br><span class="line">    &lt;version&gt;2.4.1&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure><ul><li>使用Everything工具找出以下jar包，将其复制到一个目录下。</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">hive-common-1.2.2.jar</span><br><span class="line">hive-service-1.2.2.jar</span><br><span class="line">hadoop-common-2.8.2.jar</span><br><span class="line">commons-httpclient-3.1.jar</span><br><span class="line">commons-logging-1.2.jar</span><br><span class="line">curator-client-2.13.0.jar</span><br><span class="line">curator-framework-2.6.0.jar</span><br><span class="line">hadoop-auth-2.8.2</span><br><span class="line">hive-metastore-1.2.2.jar</span><br><span class="line">httpclient-4.4.jar</span><br><span class="line">httpcore-4.4.jar</span><br><span class="line">zookeeper-3.4.6.jar</span><br><span class="line">libthrift-0.9.2.jar</span><br><span class="line">hive-jdbc-1.2.2.jar</span><br><span class="line">guava-14.0.1.jar</span><br><span class="line">hive-serde-1.2.2.jar</span><br><span class="line">slf4j-api-1.7.5.jar</span><br><span class="line">protobuf-java-2.4.1.jar</span><br></pre></td></tr></table></figure><ul><li>打开DataGrip，点击File &gt;&gt; New &gt;&gt; Data Source &gt;&gt; Apache Hive。</li><li>点击Genter中Driver的Apache Hive，在弹出页面页面中的Driver Files将刚刚收集的所有jar包导进来，点击Apply，点击OK。</li><li>此时会生成一个连接，右键Properties配置Hive的相关信息即可连接成功。</li></ul>]]></content>
    
    
    <categories>
      
      <category>大数据环境部署</category>
      
    </categories>
    
    
    <tags>
      
      <tag>大数据环境部署</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>BD环境部署02-Zookeeper 3.4.10环境搭建</title>
    <link href="/2022/01/20/BD%E7%8E%AF%E5%A2%83%E9%83%A8%E7%BD%B202-Zookeeper%203.4.10%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/"/>
    <url>/2022/01/20/BD%E7%8E%AF%E5%A2%83%E9%83%A8%E7%BD%B202-Zookeeper%203.4.10%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/</url>
    
    <content type="html"><![CDATA[<ul><li>下载Zookeeper 3.4.10并上传到&#x2F;usr&#x2F;local&#x2F;src&#x2F;目录下，并解压。</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@master ~]# <span class="built_in">cd</span> /usr/local/src/</span><br><span class="line">[root@master src]# <span class="built_in">ls</span> | grep zoo</span><br><span class="line">zookeeper-3.4.10.tar.gz</span><br><span class="line">[root@master src]# tar -zxvf zookeeper-3.4.10.tar.gz</span><br></pre></td></tr></table></figure><ul><li>进入zookeeper目录，创建data和log目录。</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@master src]# <span class="built_in">cd</span> zookeeper-3.4.10</span><br><span class="line">[root@master zookeeper-3.4.10]# <span class="built_in">mkdir</span> data <span class="built_in">log</span></span><br></pre></td></tr></table></figure><ul><li>进入conf目录，将zoo_sample.cfg文件重命名为zoo.cfg，并修改其中的内容。<ul><li>dataDir指向&#x2F;usr&#x2F;local&#x2F;src&#x2F;zookeeper-3.4.10&#x2F;data目录。</li><li>在末尾写入如下配置，其他不要动。</li></ul></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">[root@master zookeeper-3.4.10]# <span class="built_in">cd</span> conf</span><br><span class="line">[root@master conf]# <span class="built_in">mv</span> zoo_sample.cfg zoo.cfg</span><br><span class="line">[root@master conf]# vim zoo.cfg</span><br><span class="line">[root@master conf]# <span class="built_in">cat</span> zoo.cfg </span><br><span class="line"><span class="comment"># 修改</span></span><br><span class="line">dataDir=/usr/local/src/zookeeper-3.4.10/data</span><br><span class="line"><span class="comment"># 添加</span></span><br><span class="line">dataLogDir=/usr/local/src/zookeeper-3.4.10/log</span><br><span class="line">server.1=master:2888:3888</span><br><span class="line">server.2=slave1:2888:3888</span><br><span class="line">server.3=slave2:2888:3888</span><br><span class="line"><span class="comment"># 其他的不要动</span></span><br></pre></td></tr></table></figure><ul><li>同步到slave1和slave2。</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@master conf]# scp -r /usr/local/src/zookeeper-3.4.10 root@slave1:/usr/local/src/zookeeper-3.4.10</span><br><span class="line">[root@master conf]# scp -r /usr/local/src/zookeeper-3.4.10 root@slave2:/usr/local/src/zookeeper-3.4.10</span><br></pre></td></tr></table></figure><ul><li>添加Zookeeper的ID。（master、slave1、slave2）</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># master</span></span><br><span class="line">[root@master ~]# <span class="built_in">echo</span> <span class="string">&quot;1&quot;</span> &gt; /usr/local/src/zookeeper-3.4.10/data/myid</span><br><span class="line"><span class="comment"># slave1</span></span><br><span class="line">[root@slave1 ~]# <span class="built_in">echo</span> <span class="string">&quot;2&quot;</span> &gt; /usr/local/src/zookeeper-3.4.10/data/myid</span><br><span class="line"><span class="comment"># slave2</span></span><br><span class="line">[root@slave2 ~]# <span class="built_in">echo</span> <span class="string">&quot;3&quot;</span> &gt; /usr/local/src/zookeeper-3.4.10/data/myid</span><br></pre></td></tr></table></figure><ul><li>配置环境变量。（master、slave1、slave2）</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@master ~]# vim /etc/profile</span><br><span class="line">[root@master ~]# <span class="built_in">tail</span> -n 3 /etc/profile</span><br><span class="line"><span class="comment">## ZOOKEEPER_HOME</span></span><br><span class="line"><span class="built_in">export</span> ZOOKEEPER_HOME=/usr/local/src/zookeeper-3.4.10</span><br><span class="line"><span class="built_in">export</span> PATH=<span class="variable">$PATH</span>:<span class="variable">$ZOOKEEPER_HOME</span>/bin</span><br><span class="line">[root@master ~]# <span class="built_in">source</span> /etc/profile</span><br></pre></td></tr></table></figure><ul><li>启动Zookeeper服务。（master、slave1、slave2）</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@slave2 ~]# zkServer.sh start</span><br><span class="line">ZooKeeper JMX enabled by default</span><br><span class="line">Using config: /usr/local/src/zookeeper-3.4.10/bin/../conf/zoo.cfg</span><br><span class="line">Starting zookeeper ... STARTED</span><br></pre></td></tr></table></figure><ul><li>查看Zookeeper运行状态，会得到一台leader和两台follower。（master、slave1、slave2）</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@master ~]# zkServer.sh status</span><br><span class="line">ZooKeeper JMX enabled by default</span><br><span class="line">Using config: /usr/local/src/zookeeper-3.4.10/bin/../conf/zoo.cfg</span><br><span class="line">Mode: follower</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>大数据环境部署</category>
      
    </categories>
    
    
    <tags>
      
      <tag>大数据环境部署</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>HCIA-BigData-04. HBase技术原理</title>
    <link href="/2022/01/19/HCIA-BigData-04.%20HBase%E6%8A%80%E6%9C%AF%E5%8E%9F%E7%90%86/"/>
    <url>/2022/01/19/HCIA-BigData-04.%20HBase%E6%8A%80%E6%9C%AF%E5%8E%9F%E7%90%86/</url>
    
    <content type="html"><![CDATA[<h2 id="03-HBase体系架构"><a href="#03-HBase体系架构" class="headerlink" title="03. HBase体系架构"></a>03. HBase体系架构</h2><h3 id="3-1-HBase系统架构"><a href="#3-1-HBase系统架构" class="headerlink" title="3.1 HBase系统架构"></a>3.1 HBase系统架构</h3><ul><li>HBase中下层架构：<ul><li>HBase所有操作都在内存中完成，最后一定要持久化到磁盘中，因此HBase底层的存储是HDFS的DN。（并且待处理的数据一般也是从DN中来的，即一般情况下，HBase的数据存储在HDFS中）</li><li>HBase并不能直接与HDFS交互，而是需要通过文件系统客户端，所以HBase和HDFS之间存在着DFS Client。</li></ul></li><li>HBase上层架构：<ul><li>Client：HBase的客户端，用于实现交互。<ul><li>客户端有访问HBase的接口，可以实现与HBase的交互。交互包括直接与HRegionServer交互和通过Zookeeper实现对HMaster的交互。</li><li>客户端还会在缓存中维护已经访问过的Region，以此来增加后续数据访问的效率。</li></ul></li><li>HMaster：是HBase的主服务器，主要负责表和Region的管理工作：<ul><li>负责管理和维护HBase表的分区信息以及用户对表的CRUD操作。</li><li>负责不同HRegionServer之间的负载均衡。</li><li>在Region分裂或合并后，负责重新调整Region的分布。</li><li>对发生故障失效的HRegionServer上的Region进行迁移。</li><li>为了避免HMaster的单点故障，因此HMaster存在主备。</li></ul></li><li>Zookeeper：客户端并不能直接与HMaster进行交互，必须要通过Zookeeper。因为HMaster存在着主备，Zookeeper会先对HMaster进行主备选举，然后再将Client与主HMaster进行对接。</li><li>HRegionServer：数据表的管理器，是HBase中最核心的模块。负责存储和维护分配给自己的Region和响应用户的读写请求。</li><li>HRegion：相当于数据表，表里维护着自己的Region。</li></ul></li><li>基础流程总结：Client通过Zookeeper实现与HMaster的交互，HMaster直接与HRegionServer进行交互，HRegionServer与HRegion交互，HRegion实现对表内Region的操作。</li><li>注意点：客户端并是完全通过HMaster来实现对Region的操作的，Client只是通过Zookeeper来获取Region的存储位置信息，然后直接从Region对应的RegionServer上访问数据。因此大多数客户端可能从来不和HMaster通信，这种设计方式使得HMaster负载很小。</li></ul><p><img src="https://test-1305290859.cos.ap-nanjing.myqcloud.com/img/HBase%E6%9E%B6%E6%9E%84.png"></p><h3 id="3-2-Region的分裂"><a href="#3-2-Region的分裂" class="headerlink" title="3.2 Region的分裂"></a>3.2 Region的分裂</h3><ul><li>Region即区域，HBase表一开始只有一个Region。</li><li>当单个Region的数据量达到一定程度后，会进行分裂。（基本上是将原有的一个大Region均匀的分成两个小Region）</li></ul><p><img src="https://test-1305290859.cos.ap-nanjing.myqcloud.com/img/Region%E7%9A%84%E5%88%86%E8%A3%82.png"></p><ul><li>拆分过程中Region是不可读的，直到把Region存储文件异步地写到独立的文件之后（即分裂完成），才可以重新对Region进行读取。但Region分裂的速度非常快，接近瞬间，所以这个特性基本不会对访问造成什么影响。</li></ul><h3 id="3-3-Region的定位"><a href="#3-3-Region的定位" class="headerlink" title="3.3 Region的定位"></a>3.3 Region的定位</h3><h4 id="3-3-1-元数据Region和用户Region"><a href="#3-3-1-元数据Region和用户Region" class="headerlink" title="3.3.1 元数据Region和用户Region"></a>3.3.1 元数据Region和用户Region</h4><ul><li>Region分为元数据Region和用户Region两类。</li><li>Meta Region记录了每一个User Region的路由信息。</li><li>存储Meta Region的表称为元数据表，又称hbase:meta表，存储了Region和Region服务器的映射关系。</li><li>为了加快访问速度，hbase:meta表回被存储在内存中。</li></ul><p><img src="https://test-1305290859.cos.ap-nanjing.myqcloud.com/img/%E5%85%83%E6%95%B0%E6%8D%AE%E8%A1%A8%E5%92%8C%E7%94%A8%E6%88%B7%E8%A1%A8.png"></p><h4 id="3-3-2-Region的定位"><a href="#3-3-2-Region的定位" class="headerlink" title="3.3.2 Region的定位"></a>3.3.2 Region的定位</h4><ul><li>要对Region的数据进行读写的第一步是找到Region，也就是定位Region，分为以下两步：<ul><li>寻找Meta Region的地址，Meta Region中记录了User Region的路由信息。</li><li>通过Meta Region提供的User Region的路由信息快速的定位到User Region的地址。</li></ul></li><li>路由信息包括Region存储在哪张表里，这张表由哪个HRegionServer管理。</li><li>Client通过Zookeeper向HMaster获取到Region的路由信息之后，直接与维护Region所在表的HRegionServer进行交互。</li></ul><h2 id="04-HBase关键流程"><a href="#04-HBase关键流程" class="headerlink" title="04 HBase关键流程"></a>04 HBase关键流程</h2><h3 id="4-1-HBase读写过程"><a href="#4-1-HBase读写过程" class="headerlink" title="4.1 HBase读写过程"></a>4.1 HBase读写过程</h3><ul><li>写数据过程：<ul><li>用户写入数据时，会被分配到指定的HRegionServer中去执行数据的写入。</li><li>数据写入时，会先将数据写到HLog日志文件中，然后再将数据写到MemStore内存文件中，最后再将数据写到磁盘上形成StoreFile。</li><li>当出现故障时，可以通过HLog日志文件恢复数据，因此写到HLog显得尤为重要。所以只有当操作写入HLog之后，commit()调用才会将其返回给客户端。</li></ul></li><li>读数据过程：<ul><li>Client会先通过Zookeeper访问hbase:meta表获取Region的路由信息。</li><li>根据路由信息直接访问管理Region所在表的HRegionServer。</li><li>HRegionServer会先去读取MemStore内存文件，如果MemStore找不到，再去磁盘上找StoreFile磁盘文件。（先读MemStore是因为内存快）</li><li>当内存和磁盘都没有找到时，先使用HLog恢复数据，再进行读取操作。</li></ul></li></ul><h3 id="4-2-缓存的刷新"><a href="#4-2-缓存的刷新" class="headerlink" title="4.2 缓存的刷新"></a>4.2 缓存的刷新</h3><ul><li>HBase会周期性地把MemStore缓存里的内容刷入磁盘的StoreFile文件中，刷入完成后缓存将被清空，然后再再HLog中写入一个标记。（这样做即保证了数据不会丢失，又减小了内存的压力）</li><li>每次刷入操作都会生成一个新的StoreFile文件，因此再3.1 HBase体系架构图中我们可以看到一个Store包含了多个StoreFile文件。</li><li>每个HRegionServer都有一个自己的HLog文件，每次HBase启动时，每个HRegionServer都会检查一次HLog文件，确认最近一次缓存刷新操作之后是否有新的操作写入；如果发现数据更新，则依旧是先写入MemStore，再写入StoreFile。</li></ul><h3 id="4-3-StoreFile的合并"><a href="#4-3-StoreFile的合并" class="headerlink" title="4.3 StoreFile的合并"></a>4.3 StoreFile的合并</h3><ul><li>阿松大</li></ul><h3 id="4-4-Store的工作原理"><a href="#4-4-Store的工作原理" class="headerlink" title="4.4 Store的工作原理"></a>4.4 Store的工作原理</h3><ul><li>撒啊时代的</li></ul><h3 id="4-5-HLog的工作原理"><a href="#4-5-HLog的工作原理" class="headerlink" title="4.5 HLog的工作原理"></a>4.5 HLog的工作原理</h3><ul><li>撒啊时代的</li><li></li><li></li></ul><p>$$<br>\frac{\partial f}{\partial x} &#x3D; 2,\sqrt{a},x<br>$$</p><h2 id=""><a href="#" class="headerlink" title="- "></a>- </h2><h2 id="-1"><a href="#-1" class="headerlink" title="- "></a>- </h2><ul><li>HBase突出特性、HBase性能优化。</li><li>持续更新中……</li></ul>]]></content>
    
    
    <categories>
      
      <category>HCIA-BigData</category>
      
    </categories>
    
    
    <tags>
      
      <tag>HCIA-BigData</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>BD环境部署01-Hadoop 2.8.2环境搭建</title>
    <link href="/2022/01/17/BD%E7%8E%AF%E5%A2%83%E9%83%A8%E7%BD%B201-Hadoop%202.8.2%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/"/>
    <url>/2022/01/17/BD%E7%8E%AF%E5%A2%83%E9%83%A8%E7%BD%B201-Hadoop%202.8.2%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/</url>
    
    <content type="html"><![CDATA[<h2 id="01-虚拟机准备"><a href="#01-虚拟机准备" class="headerlink" title="01. 虚拟机准备"></a>01. 虚拟机准备</h2><h3 id="1-1-节点规划"><a href="#1-1-节点规划" class="headerlink" title="1.1 节点规划"></a>1.1 节点规划</h3><ul><li><p>Linux发行版：CentOS 7 最小化安装。</p></li><li><p>用户：root；密码：000000。</p></li><li><p>节点规划：3台。</p><ul><li><p>主节点：master。</p></li><li><p>从节点：slave1、slave2。</p></li></ul></li><li><p>配置：</p><ul><li>内存：至少2G。</li><li>硬盘：至少50G。</li></ul></li><li><p>网络模式：NAT。</p></li></ul><h3 id="1-2-安装前的准备"><a href="#1-2-安装前的准备" class="headerlink" title="1.2 安装前的准备"></a>1.2 安装前的准备</h3><ul><li>安装epel-release、net-tools、vim。（master、slave1、slave2）</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@master ~]# yum install -y epel-release net-tools vim</span><br></pre></td></tr></table></figure><ul><li>修改主机名。（master、slave1、slave2）</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[root@master ~]# hostnamectl set-hostname master</span><br><span class="line">[root@master ~]# hostname</span><br><span class="line">master</span><br><span class="line">[root@slave1 ~]# hostnamectl set-hostname slave1</span><br><span class="line">[root@slave1 ~]# hostname</span><br><span class="line">slave1</span><br><span class="line">[root@slave2 ~]# hostnamectl set-hostname slave2</span><br><span class="line">[root@slave2 ~]# hostname</span><br><span class="line">slave2</span><br></pre></td></tr></table></figure><ul><li>修改IP地址。（master、slave1、slave2）<ul><li>master：192.168.10.201</li><li>slave1：192.168.10.202</li><li>slave2：192.168.10.203</li></ul></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">[root@master ~]# <span class="built_in">cd</span> /etc/sysconfig/network-scripts/</span><br><span class="line">[root@master network-scripts]# vim ifcfg-ens33</span><br><span class="line">[root@master network-scripts]# <span class="built_in">cat</span> ifcfg-ens33</span><br><span class="line">TYPE=<span class="string">&quot;Ethernet&quot;</span></span><br><span class="line">PROXY_METHOD=<span class="string">&quot;none&quot;</span></span><br><span class="line">BROWSER_ONLY=<span class="string">&quot;no&quot;</span></span><br><span class="line">BOOTPROTO=<span class="string">&quot;none&quot;</span></span><br><span class="line">DEFROUTE=<span class="string">&quot;yes&quot;</span></span><br><span class="line">IPV4_FAILURE_FATAL=<span class="string">&quot;no&quot;</span></span><br><span class="line">IPV6INIT=<span class="string">&quot;yes&quot;</span></span><br><span class="line">IPV6_AUTOCONF=<span class="string">&quot;yes&quot;</span></span><br><span class="line">IPV6_DEFROUTE=<span class="string">&quot;yes&quot;</span></span><br><span class="line">IPV6_FAILURE_FATAL=<span class="string">&quot;no&quot;</span></span><br><span class="line">IPV6_ADDR_GEN_MODE=<span class="string">&quot;stable-privacy&quot;</span></span><br><span class="line">NAME=<span class="string">&quot;ens33&quot;</span></span><br><span class="line">UUID=<span class="string">&quot;64bfb584-8dba-417b-86ea-40c94a3a208d&quot;</span></span><br><span class="line">DEVICE=<span class="string">&quot;ens33&quot;</span></span><br><span class="line">ONBOOT=<span class="string">&quot;yes&quot;</span></span><br><span class="line">IPADDR=192.168.10.201</span><br><span class="line">PREFIX=24</span><br><span class="line">GATEWAY=192.168.10.2</span><br><span class="line">DNS1=8.8.8.8</span><br><span class="line">[root@master network-scripts]# nmcli connection reload</span><br><span class="line">[root@master network-scripts]# nmcli connection up ens33</span><br><span class="line">[root@master ~]# ifconfig</span><br><span class="line">[root@master ~]# ping www.baidu.com</span><br></pre></td></tr></table></figure><ul><li>完成&#x2F;etc&#x2F;hosts表的映射。（master、slave1、slave2）</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@master ~]# vim /etc/hosts</span><br><span class="line">[root@master ~]# <span class="built_in">tail</span> -n 3 /etc/hosts</span><br><span class="line">192.168.10.201 master</span><br><span class="line">192.168.10.202 slave1</span><br><span class="line">192.168.10.203 slave2</span><br></pre></td></tr></table></figure><ul><li>关闭防火墙。（master、slave1、slave2）</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@master ~]# systemctl stop firewalld</span><br><span class="line">[root@master ~]# systemctl <span class="built_in">disable</span> firewalld</span><br></pre></td></tr></table></figure><ul><li>配置SSH免密。（master、slave1、slave2）</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@master ~]# ssh-keygen -t rsa<span class="comment"># 一路回车</span></span><br><span class="line">[root@master ~]# ssh-copy-id master</span><br><span class="line">[root@master ~]# ssh-copy-id slave1</span><br><span class="line">[root@master ~]# ssh-copy-id slave2</span><br></pre></td></tr></table></figure><ul><li>卸载系统自带的JDK。（master、slave1、slave2）<ul><li>rpm -qa：查询所安装的所有rpm软件包。</li><li>grep -i：忽略大小写。</li><li>xargs -n1：表示每次只传递一个参数。</li><li>rpm -e –nodeps：强制卸载软件。</li></ul></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@master ~]# rpm -qa | grep -i java | xargs -n1 rpm -e --nodeps</span><br></pre></td></tr></table></figure><ul><li>卸载操作完成后，验证一次，如果没有查询结果则说明全部卸载完成。（master、slave1、slave2）</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@master ~]# rpm -qa | grep -i java</span><br></pre></td></tr></table></figure><ul><li>关闭虚拟机做快照New System。</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@hadoop100 opt]# init 0</span><br></pre></td></tr></table></figure><h2 id="02-安装Java"><a href="#02-安装Java" class="headerlink" title="02. 安装Java"></a>02. 安装Java</h2><ul><li>在Java官网下载Linux版本的JDK Java 8。</li><li>下载完成后使用FTP工具上传到master的&#x2F;usr&#x2F;local&#x2F;src&#x2F;目录下。</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@master <span class="built_in">local</span>]# <span class="built_in">cd</span> /usr/local/src/</span><br><span class="line">[root@master src]# <span class="built_in">ls</span></span><br><span class="line">jdk-8u212-linux-x64.tar.gz</span><br></pre></td></tr></table></figure><ul><li>解压jdk-8u212-linux-x64.tar.gz。</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@master src]# tar -zxvf jdk-8u212-linux-x64.tar.gz</span><br></pre></td></tr></table></figure><ul><li>将jdk同步到slave1和slave2。</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@master src]# scp -r /usr/local/src/jdk1.8.0_212 root@slave1:/usr/local/src/jdk1.8.0_212</span><br><span class="line">[root@master src]# scp -r /usr/local/src/jdk1.8.0_212 root@slave2:/usr/local/src/jdk1.8.0_212</span><br></pre></td></tr></table></figure><ul><li>配置环境变量并激活。（master、slave1、slave2）</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[root@master ~]# vim /etc/profile</span><br><span class="line">[root@master ~]# <span class="built_in">tail</span> -n 6 /etc/profile</span><br><span class="line"><span class="comment">## JAVA_HOME</span></span><br><span class="line"><span class="built_in">export</span> JAVA_HOME=/usr/local/src/jdk1.8.0_212</span><br><span class="line"><span class="built_in">export</span> JAVA_BIN=/usr/local/src/jdk1.8.0_212/bin</span><br><span class="line"><span class="built_in">export</span> JRE_HOME=/usr/local/src/jdk1.8.0_212/jre</span><br><span class="line"><span class="built_in">export</span> CLASSPATH=/usr/local/src/jdk1.8.0_212/jre/lib:/usr/local/src/jdk1.8.0_212/lib:/usr/local/src/jdk1.8.0_212/jre/lib/charsets.jar</span><br><span class="line"><span class="built_in">export</span> PATH=<span class="variable">$PATH</span>:<span class="variable">$JAVA_HOME</span>/bin:<span class="variable">$JRE_HOME</span>/bin</span><br><span class="line">[root@master ~]# <span class="built_in">source</span> /etc/profile</span><br></pre></td></tr></table></figure><ul><li>验证安装。（master、slave1、slave2）</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@master ~]# java -version</span><br><span class="line">java version <span class="string">&quot;1.8.0_212&quot;</span></span><br><span class="line">Java(TM) SE Runtime Environment (build 1.8.0_212-b10)</span><br><span class="line">Java HotSpot(TM) 64-Bit Server VM (build 25.212-b10, mixed mode)</span><br></pre></td></tr></table></figure><h2 id="03-安装Hadoop"><a href="#03-安装Hadoop" class="headerlink" title="03 安装Hadoop"></a>03 安装Hadoop</h2><ul><li>在官网下载Hadoop 2.8.2，然后使用FTP工具上传到master的&#x2F;usr&#x2F;local&#x2F;src&#x2F;目录下并解压。</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@master src]# <span class="built_in">ls</span></span><br><span class="line">hadoop-2.8.2.tar.gz  jdk1.8.0_212  jdk-8u212-linux-x64.tar.gz</span><br><span class="line">[root@master src]# tar -zxvf hadoop-2.8.2.tar.gz</span><br></pre></td></tr></table></figure><ul><li>进入配置文件目录。</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@master src]# <span class="built_in">cd</span> hadoop-2.8.2/etc/hadoop/</span><br><span class="line">[root@master hadoop]# <span class="built_in">pwd</span></span><br><span class="line">/usr/local/src/hadoop-2.8.2/etc/hadoop</span><br></pre></td></tr></table></figure><ul><li>编辑hadoop-env.sh文件。</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@master hadoop]# vim hadoop-env.sh</span><br><span class="line">[root@master hadoop]# <span class="built_in">cat</span> hadoop-env.sh | grep JAVA_HOME | <span class="built_in">tail</span> -n 1</span><br><span class="line"><span class="built_in">export</span> JAVA_HOME=/usr/local/src/jdk1.8.0_212</span><br></pre></td></tr></table></figure><ul><li>编辑yarn-env.sh文件。</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@master hadoop]# vim yarn-env.sh</span><br><span class="line">[root@master hadoop]# <span class="built_in">cat</span> yarn-env.sh | grep JAVA_HOME | <span class="built_in">tail</span> -n 1</span><br><span class="line"><span class="built_in">export</span> JAVA_HOME=/usr/local/src/jdk1.8.0_212</span><br></pre></td></tr></table></figure><ul><li>编写slaves文件。</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@master hadoop]# vim slaves </span><br><span class="line">[root@master hadoop]# <span class="built_in">cat</span> slaves </span><br><span class="line">slave1</span><br><span class="line">slave2</span><br></pre></td></tr></table></figure><ul><li>编写core-site.xml文件。</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">[root@master hadoop]# vim core-site.xml </span><br><span class="line">[root@master hadoop]# <span class="built_in">cat</span> core-site.xml </span><br><span class="line">&lt;configuration&gt;</span><br><span class="line">  &lt;property&gt;</span><br><span class="line">    &lt;name&gt;fs.defaultFS&lt;/name&gt;</span><br><span class="line">    &lt;value&gt;hdfs://master:9000&lt;/value&gt;</span><br><span class="line">  &lt;/property&gt;</span><br><span class="line"></span><br><span class="line">  &lt;property&gt;</span><br><span class="line">    &lt;name&gt;hadoop.tmp.dir&lt;/name&gt;</span><br><span class="line">    &lt;value&gt;file:/usr/local/src/hadoop-2.8.2/tmp/&lt;/value&gt;</span><br><span class="line">  &lt;/property&gt;</span><br><span class="line">&lt;/configuration&gt;</span><br></pre></td></tr></table></figure><ul><li>编写hdfs-site.xml文件。</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">[root@master hadoop]# vim hdfs-site.xml </span><br><span class="line">[root@master hadoop]# cat hdfs-site.xml </span><br><span class="line">&lt;configuration&gt;</span><br><span class="line">  &lt;property&gt;</span><br><span class="line">    &lt;name&gt;dfs.namenode.secondary.http-address&lt;/name&gt;</span><br><span class="line">    &lt;value&gt;master:9001&lt;/value&gt;</span><br><span class="line">  &lt;/property&gt;</span><br><span class="line"></span><br><span class="line">  &lt;property&gt;</span><br><span class="line">    &lt;name&gt;dfs.namenode.name.dir&lt;/name&gt;</span><br><span class="line">    &lt;value&gt;file:/usr/local/src/hadoop-2.8.2/dfs/name&lt;/value&gt;</span><br><span class="line">  &lt;/property&gt;</span><br><span class="line"></span><br><span class="line">  &lt;property&gt;</span><br><span class="line">    &lt;name&gt;dfs.datanode.data.dir&lt;/name&gt;</span><br><span class="line">    &lt;value&gt;file:/usr/local/src/hadoop-2.8.2/dfs/data&lt;/value&gt;</span><br><span class="line">  &lt;/property&gt;</span><br><span class="line"></span><br><span class="line">  &lt;property&gt;</span><br><span class="line">    &lt;name&gt;dfs.replication&lt;/name&gt;</span><br><span class="line">    &lt;value&gt;2&lt;/value&gt;</span><br><span class="line">  &lt;/property&gt;</span><br><span class="line">&lt;/configuration&gt;</span><br></pre></td></tr></table></figure><ul><li>编写mapred-site.xml文件。（mapred-site.xml文件本来不存在，通过mapred-site.xml.template文件拷贝得到）</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[root@master hadoop]# <span class="built_in">cp</span> mapred-site.xml.template mapred-site.xml</span><br><span class="line">[root@master hadoop]# vim mapred-site.xml</span><br><span class="line">[root@master hadoop]# <span class="built_in">cat</span> mapred-site.xml</span><br><span class="line">&lt;configuration&gt;</span><br><span class="line">  &lt;property&gt;</span><br><span class="line">    &lt;name&gt;mapreduce.framework.name&lt;/name&gt;</span><br><span class="line">    &lt;value&gt;yarn&lt;/value&gt;</span><br><span class="line">  &lt;/property&gt;</span><br><span class="line">&lt;/configuration&gt;</span><br></pre></td></tr></table></figure><ul><li>编写yarn-site.xml文件。</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">[root@master hadoop]# vim yarn-site.xml </span><br><span class="line">[root@master hadoop]# <span class="built_in">cat</span> yarn-site.xml</span><br><span class="line">&lt;configuration&gt;</span><br><span class="line">  &lt;property&gt;</span><br><span class="line">    &lt;name&gt;yarn.nodemanager.aux-services&lt;/name&gt;</span><br><span class="line">    &lt;value&gt;mapreduce_shuffle&lt;/value&gt;</span><br><span class="line">  &lt;/property&gt;</span><br><span class="line"></span><br><span class="line">  &lt;property&gt;</span><br><span class="line">    &lt;name&gt;yarn.nodemanager.aux-services.mapreduce.shuffle.class&lt;/name&gt;</span><br><span class="line">    &lt;value&gt;org.apache.hadoop.mapred.ShuffleHandler&lt;/value&gt;</span><br><span class="line">  &lt;/property&gt;</span><br><span class="line"></span><br><span class="line">  &lt;property&gt;</span><br><span class="line">    &lt;name&gt;yarn.resourcemanager.address&lt;/name&gt;</span><br><span class="line">    &lt;value&gt;master:8032&lt;/value&gt;</span><br><span class="line">  &lt;/property&gt;</span><br><span class="line"></span><br><span class="line">  &lt;property&gt;</span><br><span class="line">    &lt;name&gt;yarn.resourcemanager.scheduler.address&lt;/name&gt;</span><br><span class="line">    &lt;value&gt;master:8030&lt;/value&gt;</span><br><span class="line">  &lt;/property&gt;</span><br><span class="line"></span><br><span class="line">  &lt;property&gt;</span><br><span class="line">    &lt;name&gt;yarn.resourcemanager.resource-tracker.address&lt;/name&gt;</span><br><span class="line">    &lt;value&gt;master:8035&lt;/value&gt;</span><br><span class="line">  &lt;/property&gt;</span><br><span class="line"></span><br><span class="line">  &lt;property&gt;</span><br><span class="line">    &lt;name&gt;yarn.resourcemanager.admin.address&lt;/name&gt;</span><br><span class="line">    &lt;value&gt;master:8033&lt;/value&gt;</span><br><span class="line">  &lt;/property&gt;</span><br><span class="line"></span><br><span class="line">  &lt;property&gt;</span><br><span class="line">    &lt;name&gt;yarn.resourcemanager.webapp.address&lt;/name&gt;</span><br><span class="line">    &lt;value&gt;master:8088&lt;/value&gt;</span><br><span class="line">  &lt;/property&gt;</span><br><span class="line">&lt;/configuration&gt;</span><br></pre></td></tr></table></figure><ul><li>创建临时目录和文件目录</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@master hadoop]# <span class="built_in">mkdir</span> /usr/local/src/hadoop-2.8.2/tmp</span><br><span class="line">[root@master hadoop]# <span class="built_in">mkdir</span> -p /usr/local/src/hadoop-2.8.2/dfs/data</span><br><span class="line">[root@master hadoop]# <span class="built_in">mkdir</span> -p /usr/local/src/hadoop-2.8.2/dfs/name</span><br></pre></td></tr></table></figure><ul><li>将hadoop同步到slave1和slave2。</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@master hadoop]# scp -r /usr/local/src/hadoop-2.8.2 root@slave1:/usr/local/src/hadoop-2.8.2</span><br><span class="line">[root@master hadoop]# scp -r /usr/local/src/hadoop-2.8.2 root@slave2:/usr/local/src/hadoop-2.8.2</span><br></pre></td></tr></table></figure><ul><li>编写环境变量。（master、slave1、slave2）</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@master ~]# vim /etc/profile</span><br><span class="line">[root@master ~]# <span class="built_in">tail</span> -n 3 /etc/profile</span><br><span class="line"><span class="comment">## HADOOP_HOME</span></span><br><span class="line"><span class="built_in">export</span> HADOOP_HOME=/usr/local/src/hadoop-2.8.2</span><br><span class="line"><span class="built_in">export</span> PATH=<span class="variable">$PATH</span>:<span class="variable">$HADOOP_HOME</span>/bin</span><br><span class="line">[root@master ~]# <span class="built_in">source</span> /etc/profile</span><br></pre></td></tr></table></figure><ul><li>验证安装。（master、slave1、slave2）</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@master hadoop]# hadoop version</span><br><span class="line">Hadoop 2.8.2</span><br><span class="line">Subversion https://git-wip-us.apache.org/repos/asf/hadoop.git -r 66c47f2a01ad9637879e95f80c41f798373828fb</span><br><span class="line">Compiled by jdu on 2017-10-19T20:39Z</span><br><span class="line">Compiled with protoc 2.5.0</span><br><span class="line">From <span class="built_in">source</span> with checksum dce55e5afe30c210816b39b631a53b1d</span><br><span class="line">This <span class="built_in">command</span> was run using /usr/local/src/hadoop-2.8.2/share/hadoop/common/hadoop-common-2.8.2.jar</span><br></pre></td></tr></table></figure><h2 id="04-启动集群"><a href="#04-启动集群" class="headerlink" title="04. 启动集群"></a>04. 启动集群</h2><ul><li><p>格式化NameNode。</p><ul><li><p>注意：只有首次启动前需要需要格式化NameNode，其他时候不要轻易格式化。</p></li><li><p>非首次启动时要格式化NameNode需要先删除$HADOOP_HOME&#x2F;dfs&#x2F;data目录和$HADOOP_HOME&#x2F;dfs&#x2F;name目录。</p></li></ul></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@master hadoop]# hadoop namenode -format</span><br></pre></td></tr></table></figure><ul><li>启动Hadoop。</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@master hadoop]# <span class="built_in">cd</span> <span class="variable">$HADOOP_HOME</span> </span><br><span class="line">[root@master hadoop-2.8.2]# sbin/start-all.sh </span><br></pre></td></tr></table></figure><h2 id="05-各节点状态"><a href="#05-各节点状态" class="headerlink" title="05. 各节点状态"></a>05. 各节点状态</h2><ul><li>master</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@master hadoop-2.8.2]# jps</span><br><span class="line">11152 NameNode</span><br><span class="line">11777 Jps</span><br><span class="line">11348 SecondaryNameNode</span><br><span class="line">11510 ResourceManager</span><br></pre></td></tr></table></figure><ul><li>slave1</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@slave1 src]# jps</span><br><span class="line">10498 DataNode</span><br><span class="line">10724 Jps</span><br><span class="line">10606 NodeManager</span><br></pre></td></tr></table></figure><ul><li>slave2</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@slave2 src]# jps</span><br><span class="line">10628 NodeManager</span><br><span class="line">10760 Jps</span><br><span class="line">10526 DataNode</span><br></pre></td></tr></table></figure><h2 id="06-监控网页"><a href="#06-监控网页" class="headerlink" title="06. 监控网页"></a>06. 监控网页</h2><ul><li>YARN：<a href="http://master:8088/">http://master:8088/</a></li><li>HDFS：<a href="http://master:50070/">http://master:50070/</a></li></ul>]]></content>
    
    
    <categories>
      
      <category>大数据环境部署</category>
      
    </categories>
    
    
    <tags>
      
      <tag>大数据环境部署</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Hexo 博客使用技巧</title>
    <link href="/2022/01/16/Hexo%20%E5%8D%9A%E5%AE%A2%E4%BD%BF%E7%94%A8%E6%8A%80%E5%B7%A7/"/>
    <url>/2022/01/16/Hexo%20%E5%8D%9A%E5%AE%A2%E4%BD%BF%E7%94%A8%E6%8A%80%E5%B7%A7/</url>
    
    <content type="html"><![CDATA[<h2 id="Hexo-GitHub-搭建个人博客"><a href="#Hexo-GitHub-搭建个人博客" class="headerlink" title="Hexo + GitHub 搭建个人博客"></a>Hexo + GitHub 搭建个人博客</h2><h3 id="01-工具准备"><a href="#01-工具准备" class="headerlink" title="01. 工具准备"></a>01. 工具准备</h3><ul><li>推荐在Windows环境下执行，Linux下总出错。</li><li>确保安装好NodeJS、npm和Git。（node版本要大于10）</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">C:\Users\Administrator&gt;git --version</span><br><span class="line">git version 2.31.1.windows.1</span><br><span class="line"></span><br><span class="line">C:\Users\Administrator&gt;npm -v</span><br><span class="line">8.1.2</span><br><span class="line"></span><br><span class="line">C:\Users\Administrator&gt;node -v</span><br><span class="line">v16.13.2</span><br></pre></td></tr></table></figure><ul><li>安装Hexo。</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">C:\Users\Administrator&gt;npm install hexo-cli -g</span><br><span class="line"></span><br><span class="line">added 58 packages, and audited 59 packages <span class="keyword">in</span> 2s</span><br><span class="line"></span><br><span class="line">12 packages are looking <span class="keyword">for</span> funding</span><br><span class="line">  run `npm fund` <span class="keyword">for</span> details</span><br><span class="line"></span><br><span class="line">found 0 vulnerabilities</span><br></pre></td></tr></table></figure><ul><li>通过检查版本号的方式验证安装。</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">C:\Users\Administrator&gt;hexo -v</span><br><span class="line">hexo-cli: 4.3.0</span><br><span class="line">os: win32 10.0.19044</span><br><span class="line">node: 16.13.2</span><br><span class="line">v8: 9.4.146.24-node.14</span><br><span class="line">uv: 1.42.0</span><br><span class="line">zlib: 1.2.11</span><br><span class="line">brotli: 1.0.9</span><br><span class="line">ares: 1.18.1</span><br><span class="line">modules: 93</span><br><span class="line">nghttp2: 1.45.1</span><br><span class="line">napi: 8</span><br><span class="line">llhttp: 6.0.4</span><br><span class="line">openssl: 1.1.1l+quic</span><br><span class="line">cldr: 39.0</span><br><span class="line">icu: 69.1</span><br><span class="line">tz: 2021a</span><br><span class="line">unicode: 13.0</span><br><span class="line">ngtcp2: 0.1.0-DEV</span><br><span class="line">nghttp3: 0.1.0-DEV</span><br></pre></td></tr></table></figure><h3 id="02-创建-GitHub-共有仓库"><a href="#02-创建-GitHub-共有仓库" class="headerlink" title="02. 创建 GitHub 共有仓库"></a>02. 创建 GitHub 共有仓库</h3><ul><li>更新中 ……</li></ul><h2 id="更换-Hexo-个人博客的主题"><a href="#更换-Hexo-个人博客的主题" class="headerlink" title="更换 Hexo 个人博客的主题"></a>更换 Hexo 个人博客的主题</h2><ul><li>访问 Hexo 官网：<a href="https://hexo.io/">Hexo官网</a>，点击 Themes 。在这里可以选择所有可用的主题，我们在 Search 中搜索 fluid ，然后点击标题，它会跳转到 Github 项目界面，根据里面的说明下载主题与依赖。</li><li>修改 Hexo 根目录下的 _config.yml 文件，将 theme 的值改为 fluid 。</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">theme: fluid</span><br></pre></td></tr></table></figure><ul><li>根据主题官网给出的文档自行配置网站需要开启的功能。</li><li>清理、生成、发布。</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo clean &amp;&amp; hexo g &amp;&amp; hexo d</span><br></pre></td></tr></table></figure><h2 id="使用-Hexo-发表文章"><a href="#使用-Hexo-发表文章" class="headerlink" title="使用 Hexo 发表文章"></a>使用 Hexo 发表文章</h2><ul><li>首先，在 Blog 目录下打开 Git Bash，然后使用 <code>hexo new post</code> 命令创建一篇 Markdown 文章。</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new post 在Hexo中写文章</span><br><span class="line">INFO  Validating config</span><br><span class="line">INFO  Created: ~\Desktop\Blog\<span class="built_in">source</span>\_posts\在Hexo中写文章.md</span><br></pre></td></tr></table></figure><ul><li>接着，到 Blog\source\_posts 目录下编辑对应的 .md 文件。</li><li>如果这篇文章有标签，请在开头处添加配置信息。</li></ul><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">tags: Hexo使用方式</span><br><span class="line">category: 建站技巧</span><br></pre></td></tr></table></figure><ul><li>本地部署。</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ hexo s</span><br><span class="line">INFO  Validating config</span><br><span class="line">INFO  Start processing</span><br><span class="line">INFO  Hexo is running at http://localhost:4000/ . Press Ctrl+C to stop.</span><br></pre></td></tr></table></figure><ul><li>发布于上传。</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ hexo g </span><br><span class="line">$ hexo d</span><br></pre></td></tr></table></figure><ul><li>文章顶部配置内容参考手册：<a href="https://hexo.io/zh-cn/docs/front-matter">Front-matter</a></li></ul><h2 id="Hexo-引入-live2d-卡通形象"><a href="#Hexo-引入-live2d-卡通形象" class="headerlink" title="Hexo 引入 live2d 卡通形象"></a>Hexo 引入 live2d 卡通形象</h2><ul><li>在博客根目录右键 &gt;&gt; Git Bash Here ，然后使用以下命令安装 live2d 插件。</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install --save hexo-helper-live2d</span><br></pre></td></tr></table></figure><ul><li>在这个网站挑选你喜欢的模型：<a href="https://huaji8.top/post/live2d-plugin-2.0/">hexo live2d插件 2.0</a></li><li>安装模型，模型全称：<code>live2d-widget-model-模型名</code><ul><li>这里以安装 koharu 为例。</li></ul></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install live2d-widget-model-koharu</span><br></pre></td></tr></table></figure><ul><li>编辑 _config.yml 文件，在末尾加上以下配置。</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">live2d:</span><br><span class="line">  <span class="built_in">enable</span>: <span class="literal">true</span></span><br><span class="line">  scriptFrom: <span class="built_in">local</span></span><br><span class="line">  pluginRootPath: live2dw/</span><br><span class="line">  pluginJsPath: lib/</span><br><span class="line">  pluginModelPath: assets/</span><br><span class="line">  tagMode: <span class="literal">false</span></span><br><span class="line">  debug: <span class="literal">false</span></span><br><span class="line">  model:</span><br><span class="line">    use: live2d-widget-model-koharu <span class="comment"># 模型全称</span></span><br><span class="line">  display:</span><br><span class="line">    position: right <span class="comment"># 在屏幕上的显示位置</span></span><br><span class="line">    width: 170 <span class="comment"># 显示宽度</span></span><br><span class="line">    height: 340 <span class="comment"># 显示高度</span></span><br><span class="line">  mobile:</span><br><span class="line">    show: <span class="literal">true</span> <span class="comment"># 手机端是否显示</span></span><br></pre></td></tr></table></figure><ul><li>在本地使用<code>hexo s</code>命令运行hexo，即可看到卡通形象。</li><li>最后正常清理、生成、发布即可。</li></ul>]]></content>
    
    
    <categories>
      
      <category>建站技巧</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Hexo使用方式</tag>
      
    </tags>
    
  </entry>
  
  
  
  
</search>
